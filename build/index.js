(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.wp.data,o=window.wp.element,r=window.wp.i18n,i=window.wp.components,a=window.wp.blockEditor,l=window.wp.apiFetch;var s=e.n(l);const c=window.ReactJSXRuntime,p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"archive-link/archive-link","version":"1.0.0","title":"Archive Link","category":"design","parent":["core/navigation"],"icon":"archive","description":"A block for inserting links to post type archives","supports":{"html":false},"textdomain":"archive-link","editorScript":"file:./index.tsx","attributes":{"postType":{"type":"string","default":"post"},"label":{"type":"string","default":""},"openInNewTab":{"type":"boolean","default":false},"url":{"type":"string","default":"#"}}}');(0,t.registerBlockType)(p,{edit:function({attributes:e,setAttributes:t}){const{postType:l,label:p,openInNewTab:u,url:d}=e,h=(0,a.useBlockProps)();(0,o.useEffect)((()=>{l&&s()({path:`/post-archive-link/v1/url?type=${encodeURIComponent(l)}`}).then((e=>{const n=e;n?.url&&t({url:n.url})})).catch((()=>{t({url:"#"})}))}),[l,t]);const w=(0,n.useSelect)((e=>{const t=e("core").getPostTypes({per_page:-1});return t?t.filter((e=>e.viewable)):[]}),[]).map((e=>({label:e.name,value:e.slug}))),v=e=>t({label:e});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.InspectorControls,{children:(0,c.jsxs)(i.PanelBody,{title:(0,r.__)("Archive Link Settings","archive-link"),children:[(0,c.jsx)(i.SelectControl,{label:(0,r.__)("Post Type","archive-link"),value:l,options:w,onChange:e=>t({postType:e,url:void 0})}),(0,c.jsx)(i.TextControl,{label:(0,r.__)("Link Text","archive-link"),value:p,onChange:v}),(0,c.jsx)(i.ToggleControl,{label:(0,r.__)("Open in new tab","archive-link"),checked:u,onChange:e=>t({openInNewTab:e})})]})}),(0,c.jsx)("div",{...h,children:d?(0,c.jsx)(a.RichText,{tagName:"a",value:p,href:d,onChange:v}):(0,c.jsx)(i.Spinner,{})})]})},save:function({attributes:e}){const{url:t,label:n,openInNewTab:o}=e;return(0,c.jsx)("a",{href:t,className:"wp-block-post-archive-link",target:o?"_blank":void 0,rel:o?"noopener noreferrer":void 0,children:n})}})})();